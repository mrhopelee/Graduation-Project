<!--Created by Administrator on 2016-2-24.-->
<!DOCTYPE html>
<html lang="en">
<head><title>管理</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="/stylesheets/normalize.v3.0.3.css ">
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/tanchuceng.css">
    <script src="/javascripts/jquery-2.2.1.js"></script>
    <!--<script src="/javascripts/angular-1.5.2.js"></script>-->
    <!--<script src="/javascripts/angular-1.5.3.js"></script>-->
    <script></script>
</head>
<body>
<div class="all">
    <header class="sitetitle"><a href="http://localhost:27017/manager.html"><span>myphoto</span></a></header>
    <div class="left">
        <div class="creclass">
            <button class="newclassbtn abscenter">new class</button>
            <div class="hidnewclass abscenter">
                <input type="text" required class="creclassname">
                <button class="creclassbtn">增加</button>
                <button class="hidcreclassbtn">取消</button>
            </div>
        </div>
        <div class="showclass">
            <ul class="classlist">
                <li data-c="" class="classitem this">全部</li>
            </ul>
        </div>
    </div>
    <div class="right">
        <div class="crepicture">
            <form action="/file_upload" method="post" enctype="multipart/form-data" class="uploadform">
                <input type="hidden" value="" name="classname">
                <input type="file" name="image" size="50" class="filebtn">
                <input type="submit" value="upload photo" class="uploadbtn">
            </form>
        </div>
        <div class="showpicture">

        </div>
    </div>

</div>
</body>
</html>
<script>
    function allowDrop(ev)
    {
        ev.preventDefault();
    }

    function drag(ev)
    {
        var thispic = $('.showitem:hover');
        ev.dataTransfer.setData("pictureid",thispic.attr("data-id"));
    }

    function drop(ev)
    {
        ev.preventDefault();
        if($(event.target).attr("class")===$('.this').attr("class")){

        }else{
            var thisItem = $(event.target);
            var classid = thisItem.attr("data-c");
            var pictureid=ev.dataTransfer.getData("pictureid");
            /*console.log(classid);
            console.log(pictureid);*/
            pictureUpd(pictureid,classid);
            cleanClassUD();
            thisItem.addClass("this");
            if(classid != "56dab2879a78ca71f18afdb6"){
                var classnamestr = thisItem.text();
                thisItem
                        .append("<button class=\"updclass\">u</button><button class=\"delclass\">d</button>")
                        .append("<div class=\"hiduc abscenter\"><input class=\"udpclassname\" type=\"text\" autofocus /><button class=\"udpclassbtn\">修改</button><button class=\"hidudpclassbtn\">取消</button></div>");
                $('.udpclassname').val(classnamestr);
                classDel();
                /*删除分类事件*/
                updateClassClick();
                /*修改分类的页面交互*/
            }
            //ev.target.appendChild(document.getElementById(data));
        }
    }
</script>
<script src="/javascripts/tanchuceng.js"></script>
<script src="/javascripts/picturefun.js"></script>
<script src="/javascripts/classfun.js"></script>
<script src="/javascripts/pageinit.js"></script>